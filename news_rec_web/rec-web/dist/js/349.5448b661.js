"use strict";(self["webpackChunktrade_web"]=self["webpackChunktrade_web"]||[]).push([[349],{2349:function(t,i,s){s.r(i),s.d(i,{default:function(){return h}});var e=function(){var t=this,i=t._self._c;return i("div",[i("van-nav-bar",{attrs:{"left-text":"返回","left-arrow":"",fixed:t.isFixed},on:{"click-left":t.onClickLeft}}),i("div",{staticClass:"newsinfo-continer"},[i("div",{staticClass:"newsTitle"},[i("h1",[t._v(t._s(t.news_content.title))]),i("p",[i("span",[t._v("发布时间："+t._s(t.news_content.ctime))]),i("span",[t._v("标签："+t._s(t.cate))])]),i("hr")]),i("div",{staticClass:"content",domProps:{innerHTML:t._s(t.content)}}),i("div",{staticClass:"editor",domProps:{innerHTML:t._s(t.editor)}}),i("div",{attrs:{id:"action"}},[i("span",[t._v("喜欢: "),i("svg",{directives:[{name:"show",rawName:"v-show",value:!t.islike,expression:"!islike"}],staticClass:"icon",attrs:{"aria-hidden":"true",width:"12",height:"12"},on:{click:t.iflike}},[i("use",{attrs:{"xlink:href":"#icon-xihuan1"}})]),i("svg",{directives:[{name:"show",rawName:"v-show",value:t.islike,expression:"islike"}],staticClass:"icon",attrs:{"aria-hidden":"true",width:"12",height:"12"},on:{click:t.iflike}},[i("use",{attrs:{"xlink:href":"#icon-xihuan"}})])]),i("span",[t._v("收藏: "),i("svg",{directives:[{name:"show",rawName:"v-show",value:!t.iscollection,expression:"!iscollection"}],staticClass:"icon",attrs:{"aria-hidden":"true",width:"12",height:"12"},on:{click:t.ifcollection}},[i("use",{attrs:{"xlink:href":"#icon-shoucang"}})]),i("svg",{directives:[{name:"show",rawName:"v-show",value:t.iscollection,expression:"iscollection"}],staticClass:"icon",attrs:{"aria-hidden":"true",width:"12",height:"12"},on:{click:t.ifcollection}},[i("use",{attrs:{"xlink:href":"#icon-shoucang1"}})])])])]),i("div",{staticClass:"blank"})],1)},n=[],a=s(2455),o={data(){return{id:this.$route.params.id,news_content:[],content:"",editor:"",islike:!1,iscollection:!1,isFixed:!0,cate:this.$route.params.cate}},methods:{onClickLeft(){this.$router.go(-1)},getNewsInfo(){let t=/责任编辑/,i=this.$store.state.user.username;this.axios.get("/recsys/news_detail?news_id="+this.id+"&user_name="+i).then((i=>{200===i.status?(this.news_content=i.data.data,this.content=this.news_content.content.split(t)[0],this.editor="责任编辑:"+this.news_content.content.split(t)[1],1==i.data.data.likes?this.islike=!0:this.islike=!1,1==i.data.data.collections?this.iscollection=!0:this.iscollection=!1):(0,a.A)("加载数据失败")}))},sendInfo(){var t={user_name:this.$store.state.user.username,news_id:this.id,action_time:Date.now(),action_type:"read"};this.axios.post("/recsys/action",t).then((t=>{200===t.status||(0,a.A)("加载数据失败")}))},iflike(){this.islike=!this.islike,1==this.islike?this.$store.commit("actionChange",{type:"likes",id:this.id,num:1}):this.$store.commit("actionChange",{type:"likes",id:this.id,num:-1});var t={user_name:this.$store.state.user.username,news_id:this.id,action_time:Date.now(),action_type:`likes:${this.islike}`};this.axios.post("/recsys/action",t).then((t=>{200===t.status||(0,a.A)("加载数据失败")}))},ifcollection(){this.iscollection=!this.iscollection,1==this.iscollection?this.$store.commit("actionChange",{type:"collections",id:this.id,num:1}):this.$store.commit("actionChange",{type:"collections",id:this.id,num:-1});var t={user_name:this.$store.state.user.username,news_id:this.id,action_time:Date.now(),action_type:`collections:${this.iscollection}`};this.axios.post("/recsys/action",t).then((t=>{200===t.status||(0,a.A)("加载数据失败")}))}},created(){this.getNewsInfo(),this.sendInfo()}},c=o,l=s(845),r=(0,l.A)(c,e,n,!1,null,"d4fcc7c2",null),h=r.exports}}]);
//# sourceMappingURL=349.5448b661.js.map
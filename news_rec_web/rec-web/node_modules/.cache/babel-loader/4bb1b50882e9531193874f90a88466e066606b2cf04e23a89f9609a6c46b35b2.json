{"ast":null,"code":"import { Toast } from 'vant';\nexport default {\n  data() {\n    return {\n      // 获取路由地址的id,根据这个id来展示不同的数据。\n      id: this.$route.params.id,\n      news_content: [],\n      content: '',\n      editor: '',\n      islike: false,\n      iscollection: false,\n      isFixed: true,\n      cate: this.$route.params.cate\n    };\n  },\n  methods: {\n    // 返回上一页\n    onClickLeft() {\n      this.$router.go(-1);\n    },\n    // 获取新闻详情\n    getNewsInfo() {\n      let reg = /责任编辑/;\n      let user_name = this.$store.state.user.username;\n      this.axios.get(\"/recsys/news_detail?news_id=\" + this.id + '&user_name=' + user_name).then(resource => {\n        if (resource.status === 200) {\n          this.news_content = resource.data.data;\n          this.content = this.news_content.content.split(reg)[0];\n          this.editor = '责任编辑:' + this.news_content.content.split(reg)[1];\n          if (resource.data.data.likes == true) {\n            this.islike = true;\n          } else {\n            this.islike = false;\n          }\n          if (resource.data.data.collections == true) {\n            this.iscollection = true;\n          } else {\n            this.iscollection = false;\n          }\n        } else {\n          Toast('加载数据失败');\n        }\n      });\n    },\n    // 发送action为read的请求\n    sendInfo() {\n      var val = {\n        user_name: this.$store.state.user.username,\n        news_id: this.id,\n        action_time: Date.now(),\n        action_type: 'read'\n      };\n      this.axios.post(\"/recsys/action\", val).then(resource => {\n        if (resource.status === 200) {} else {\n          Toast('加载数据失败');\n        }\n      });\n    },\n    // 点击喜欢时发送请求\n    iflike() {\n      this.islike = !this.islike;\n      // 调用store中的actionChange函数控制次数的变化\n      if (this.islike == true) {\n        this.$store.commit('actionChange', {\n          type: 'likes',\n          id: this.id,\n          num: 1\n        });\n      } else {\n        this.$store.commit('actionChange', {\n          type: 'likes',\n          id: this.id,\n          num: -1\n        });\n      }\n      var val = {\n        user_name: this.$store.state.user.username,\n        news_id: this.id,\n        action_time: Date.now(),\n        action_type: `likes:${this.islike}`\n      };\n      this.axios.post(\"/recsys/action\", val).then(resource => {\n        if (resource.status === 200) {} else {\n          Toast('加载数据失败');\n        }\n      });\n    },\n    // 点击收藏时发送请求\n    ifcollection() {\n      this.iscollection = !this.iscollection;\n      if (this.iscollection == true) {\n        this.$store.commit('actionChange', {\n          type: 'collections',\n          id: this.id,\n          num: 1\n        });\n      } else {\n        this.$store.commit('actionChange', {\n          type: 'collections',\n          id: this.id,\n          num: -1\n        });\n      }\n      var val = {\n        user_name: this.$store.state.user.username,\n        news_id: this.id,\n        action_time: Date.now(),\n        action_type: `collections:${this.iscollection}`\n      };\n      this.axios.post(\"/recsys/action\", val).then(resource => {\n        if (resource.status === 200) {} else {\n          Toast('加载数据失败');\n        }\n      });\n    }\n  },\n  // 创建页面时调用函数\n  created() {\n    this.getNewsInfo();\n    this.sendInfo();\n  }\n};","map":{"version":3,"names":["Toast","data","id","$route","params","news_content","content","editor","islike","iscollection","isFixed","cate","methods","onClickLeft","$router","go","getNewsInfo","reg","user_name","$store","state","user","username","axios","get","then","resource","status","split","likes","collections","sendInfo","val","news_id","action_time","Date","now","action_type","post","iflike","commit","type","num","ifcollection","created"],"sources":["src/components/NewsInfo.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <van-nav-bar left-text=\"返回\" left-arrow @click-left=\"onClickLeft\" :fixed='isFixed' />\r\n    <div class=\"newsinfo-continer\">\r\n      <div class=\"newsTitle\">\r\n        <!--大标题-->\r\n        <h1>{{ news_content.title }}</h1>\r\n        <!--子标题-->\r\n        <p>\r\n          <span>发布时间：{{ news_content.ctime}}</span>\r\n          <span>标签：{{cate}}</span>\r\n        </p>\r\n        <hr>\r\n      </div>\r\n\r\n      <!--内容区域-->\r\n      <div class=\"content\" v-html=\"content\"></div>\r\n      <div class=\"editor\" v-html=\"editor\"></div>\r\n\r\n      <div id=\"action\">\r\n        <span>喜欢:\r\n          <svg class=\"icon\" aria-hidden=\"true\" width=\"12\" height=\"12\" v-show=\"!islike\" @click=\"iflike\">\r\n            <use xlink:href=\"#icon-xihuan1\"></use>\r\n          </svg>\r\n          <svg class=\"icon\" aria-hidden=\"true\" width=\"12\" height=\"12\" v-show=\"islike\" @click=\"iflike\">\r\n            <use xlink:href=\"#icon-xihuan\"></use>\r\n          </svg>\r\n        </span>\r\n        <span>收藏:\r\n          <svg class=\"icon\" aria-hidden=\"true\" width=\"12\" height=\"12\" v-show=\"!iscollection\" @click=\"ifcollection\">\r\n            <use xlink:href=\"#icon-shoucang\"></use>\r\n          </svg>\r\n          <svg class=\"icon\" aria-hidden=\"true\" width=\"12\" height=\"12\" v-show=\"iscollection\" @click=\"ifcollection\">\r\n            <use xlink:href=\"#icon-shoucang1\"></use>\r\n          </svg>\r\n        </span>\r\n      </div>\r\n\r\n    </div>\r\n    <div class=\"blank\"></div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n  import { Toast } from 'vant'\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        // 获取路由地址的id,根据这个id来展示不同的数据。\r\n        id: this.$route.params.id,\r\n        news_content: [],\r\n        content: '',\r\n        editor: '',\r\n        islike: false,\r\n        iscollection: false,\r\n        isFixed: true,\r\n        cate: this.$route.params.cate\r\n      }\r\n\r\n    },\r\n    methods: {\r\n      // 返回上一页\r\n      onClickLeft() {\r\n        this.$router.go(-1);\r\n      },\r\n\r\n      // 获取新闻详情\r\n      getNewsInfo() {\r\n        let reg = /责任编辑/;\r\n        let user_name = this.$store.state.user.username;\r\n        this.axios.get(\"/recsys/news_detail?news_id=\" + this.id + '&user_name=' + user_name).then(resource => {\r\n          if (resource.status === 200) {\r\n            this.news_content = resource.data.data\r\n            this.content = this.news_content.content.split(reg)[0]\r\n            this.editor = '责任编辑:' + this.news_content.content.split(reg)[1]\r\n            if (resource.data.data.likes == true) {\r\n              this.islike = true\r\n            } else {\r\n              this.islike = false\r\n            }\r\n            if (resource.data.data.collections == true) {\r\n              this.iscollection = true\r\n            } else {\r\n              this.iscollection = false\r\n            }\r\n          } else {\r\n            Toast('加载数据失败')\r\n          }\r\n        })\r\n\r\n      },\r\n\r\n      // 发送action为read的请求\r\n      sendInfo() {\r\n        var val = {\r\n          user_name: this.$store.state.user.username,\r\n          news_id: this.id,\r\n          action_time: Date.now(),\r\n          action_type: 'read',\r\n        }\r\n        this.axios.post(\"/recsys/action\", val).then(resource => {\r\n          if (resource.status === 200) {} else {\r\n            Toast('加载数据失败')\r\n          }\r\n        })\r\n      },\r\n\r\n      // 点击喜欢时发送请求\r\n      iflike() {\r\n        this.islike = !this.islike\r\n        // 调用store中的actionChange函数控制次数的变化\r\n        if(this.islike == true){\r\n            this.$store.commit('actionChange', {type:'likes',id:this.id,num:1})\r\n          }else{\r\n            this.$store.commit('actionChange', {type:'likes',id:this.id,num:-1})\r\n          }\r\n        var val = {\r\n          user_name: this.$store.state.user.username,\r\n          news_id: this.id,\r\n          action_time: Date.now(),\r\n          action_type: `likes:${this.islike}`,\r\n        }\r\n        this.axios.post(\"/recsys/action\", val).then(resource => {\r\n          if (resource.status === 200) {\r\n          } else {\r\n            Toast('加载数据失败')\r\n          }\r\n        })\r\n\r\n      },\r\n\r\n      // 点击收藏时发送请求\r\n      ifcollection() {\r\n        this.iscollection = !this.iscollection\r\n        if(this.iscollection == true){\r\n           this.$store.commit('actionChange', {type:'collections',id:this.id,num:1})\r\n          }else{\r\n            this.$store.commit('actionChange', {type:'collections',id:this.id,num:-1})\r\n          }\r\n        var val = {\r\n          user_name: this.$store.state.user.username,\r\n          news_id: this.id,\r\n          action_time: Date.now(),\r\n          action_type: `collections:${this.iscollection}`,\r\n        }\r\n        this.axios.post(\"/recsys/action\", val).then(resource => {\r\n          if (resource.status === 200) {\r\n          } else {\r\n            Toast('加载数据失败')\r\n          }\r\n        })\r\n      }\r\n    },\r\n\r\n    // 创建页面时调用函数\r\n    created() {\r\n      this.getNewsInfo()\r\n      this.sendInfo()\r\n    },\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n    /* 标题 */\r\n  .newsTitle {\r\n    padding: 3.5rem 1.5rem 0 1.5rem;\r\n  }\r\n\r\n  /* 大标题 */\r\n  .newsTitle h1 {\r\n    text-align: center;\r\n    color: rgb(77,79,83);;\r\n    font-weight: 600;\r\n    padding: 40px 0 20px 0;\r\n    margin: 0;\r\n    font-size: 1.5rem;\r\n  }\r\n\r\n  /* 副标题 */\r\n  .newsTitle p {\r\n    font-size: 12px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    padding-top: 1rem;\r\n    padding-bottom: 1rem;\r\n    color: #4679e3;\r\n  }\r\n\r\n  /* 内容 距离底部padding 遮挡action */\r\n  .newsinfo-continer[data-v-6bb6e9d1] {\r\n    padding-bottom: 5rem;\r\n    background-color: white;\r\n  }\r\n\r\n  /* 具体内容 */\r\n  .content[data-v-6bb6e9d1] {\r\n    font-size: 1rem;\r\n    padding: 0 20px 20px 20px;\r\n    text-indent: 2em;\r\n    line-height: 2.2rem;\r\n    /* 首行文本缩进 */\r\n    color: rgb(28 27 29);\r\n}\r\n\r\n  /* 责任编辑 */\r\n  .editor {\r\n    font-size: 1rem;\r\n    padding: 0 20px 0 20px;\r\n    line-height: 2.2rem;\r\n    text-align: end;\r\n  }\r\n\r\n  #action {\r\n    /* margin: 20px 0 20px 0; */\r\n    display: flex;\r\n    justify-content: space-evenly;\r\n  }\r\n\r\n  #action>span {\r\n    display: inline-block;\r\n    padding-top: 2rem;\r\n    padding-bottom: 2rem;\r\n    font-size: 1rem;\r\n  }\r\n\r\n  .blank {\r\n    width: 100vw;\r\n    height: 50px;\r\n    position: fixed;\r\n    bottom: 0;\r\n    background-color: white;\r\n  }\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
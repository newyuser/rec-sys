{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { areaList } from '@vant/area-data';\nimport { Toast } from 'vant';\nimport encrypt from '../assets/js/encrypt';\nexport default {\n  data() {\n    return {\n      model: {\n        username: '',\n        passwd: '',\n        passwd2: '',\n        city: '',\n        age: '',\n        gender: 'male'\n      },\n      state: '',\n      message: {\n        username: '',\n        passwd: '',\n        passwd2: '',\n        age: ''\n      },\n      val: 'register',\n      isLogin: true,\n      showArea: false,\n      areaList\n    };\n  },\n  methods: {\n    login() {\n      let url = '/recsys/register';\n      let res = this.model;\n      //密码加密\n      res.passwd = encrypt.Encrypt(this.model.passwd);\n      if (this.state) {\n        this.axios.post(url, res).then(resource => {\n          if (resource.data.code === 200) {\n            let loginInfo = {\n              LoginName: res.username,\n              openId: \"asdasdadasdasdadad\"\n            };\n\n            // 调用setCookie方法，同时传递需要存储的数据，保存天数\n            this.cookie.setCookie(loginInfo, 7);\n\n            //将信息存入store 全部组件都可以使用\n            this.$store.state.type = 'signUp';\n            this.$store.state.user.username = res.username;\n            this.$store.state.user.age = this.model.age;\n            this.$store.state.user.gender = this.model.gender;\n            this.$router.push('/recLists');\n          }\n          if (resource.data.code === 500) {\n            Toast('用户名已存在');\n          }\n        });\n      }\n    },\n    //处理选择的城市\n    getCity(city) {\n      this.model.city = city.join('-');\n    },\n    // 验证用户名\n    ruleName(val) {\n      var nameReg = /^[A-Za-z0-9]+$/;\n      if (val == '') {\n        this.message.username = '请输入用户名';\n        this.state = false;\n        return false;\n      } else if (!nameReg.test(val)) {\n        this.message.username = '用户名格式为字母和数字';\n        this.state = false;\n        return false;\n      } else {\n        this.message.username = '';\n        this.state = true;\n      }\n    },\n    // 验证密码\n    rulePasswd(val) {\n      var reg = /^[A-Za-z0-9]{6,}$/;\n      if (val == '') {\n        this.message.passwd = '请输入密码';\n        this.state = false;\n        return false;\n      } else if (!reg.test(val)) {\n        this.message.passwd = '密码长度至少6位，仅包括为字母和数字';\n        this.state = false;\n        return false;\n      } else {\n        this.message.passwd = '';\n        this.state = true;\n      }\n    },\n    //验证密码是否一致\n    rulePasswd2(val) {\n      if (val == '') {\n        this.message.passwd2 = '请再次输入密码';\n        this.state = false;\n        return false;\n      } else if (val !== this.model.passwd) {\n        this.message.passwd2 = '两次输入的密码不正确';\n        this.state = false;\n        return false;\n      } else {\n        this.message.passwd2 = '';\n        this.state = true;\n      }\n    },\n    //验证年龄\n    ruleAge(val) {\n      var ageReg = /^([1-9][0-9]{0,1}|100)$/;\n      if (val == '') {\n        this.message.age = '请输入年龄';\n        this.state = false;\n        return false;\n      } else if (!ageReg.test(val)) {\n        this.message.age = '请输入1-100的整数';\n        this.state = false;\n        return false;\n      } else {\n        this.message.age = '';\n        this.state = true;\n      }\n    },\n    // 选择城市\n    onConfirm(values) {\n      let pinyin = require('js-pinyin');\n      this.model.city = values[1].name.slice(0, values[1].name.length - 1); //过滤到市级，删除‘市’\n      this.model.city = pinyin.getFullChars(this.model.city); //将汉字转换为拼音\n      this.showArea = false;\n    }\n  }\n};","map":{"version":3,"names":["areaList","Toast","encrypt","data","model","username","passwd","passwd2","city","age","gender","state","message","val","isLogin","showArea","methods","login","url","res","Encrypt","axios","post","then","resource","code","loginInfo","LoginName","openId","cookie","setCookie","$store","type","user","$router","push","getCity","join","ruleName","nameReg","test","rulePasswd","reg","rulePasswd2","ruleAge","ageReg","onConfirm","values","pinyin","require","name","slice","length","getFullChars"],"sources":["src/components/signUp.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <ul class=\"login-nav\">\n      <li class=\"login-nav__item\">\n        <a @click=\"$router.push('/')\">登录</a>\n      </li>\n      <li class=\"login-nav__item active\">\n        <a @click=\"$router.push('/signUp')\">注册</a>\n      </li>\n    </ul>\n\n      <label for=\"login-input-user\" class=\"login__label\">\n      用户名\n      </label>\n      <van-field v-model=\"model.username\" placeholder=\"请输入用户名\" required @blur='ruleName(model.username)' />\n      <span class=\"errorMessage\">{{message.username}}</span>\n\n      <label for=\"login-input-password\" class=\"login__label\">\n        密码\n      </label>\n      <van-field v-model=\"model.passwd\" placeholder=\"请输入密码\" type=\"password\" required @blur='rulePasswd(model.passwd)' />\n      <span class=\"errorMessage\">{{message.passwd}}</span>\n\n      <label for=\"login-input-user\" class=\"login__label\">\n        验证密码\n      </label>\n      <van-field v-model=\"model.passwd2\" placeholder=\"再次输入密码\" type=\"password\" required @blur='rulePasswd2(model.passwd2)' />\n      <span class=\"errorMessage\">{{message.passwd2}}</span>\n\n      <label for=\"login-input-user\" class=\"login__label\">\n        年龄\n      </label>\n      <van-field v-model=\"model.age\" placeholder=\"请输入年龄\" required @blur='ruleAge(model.age)' />\n      <span class=\"errorMessage\">{{message.age}}</span>\n\n      <label for=\"login-input-user\" class=\"login__label\">\n        性别\n      </label>\n      <van-radio-group class=\"login__label_male\" v-model=\"model.gender\" direction=\"horizontal\" icon-size='16px'>\n        <van-radio name=\"male\">男</van-radio>\n        <van-radio name=\"female\">女</van-radio>\n      </van-radio-group>\n\n      <label for=\"login-input-user\" class=\"login__label\">\n        城市\n      </label>\n      <van-field readonly clickable name=\"area\" :value=\"model.city\" placeholder=\"点击选择省市\" @click=\"showArea = true\" />\n      <van-popup v-model=\"showArea\" position=\"bottom\">\n        <van-area :area-list=\"areaList\" @confirm=\"onConfirm\" @cancel=\"showArea = false\" :columns-num=\"2\" />\n      </van-popup>\n\n      <button class=\"login__submit\" @click=\"login\">注册</button>\n    \n  </div>\n\n</template>\n\n<script>\n  import {\n    areaList\n  } from '@vant/area-data';\n  import { Toast } from 'vant'\n  import encrypt from '../assets/js/encrypt'\n  export default {\n    data() {\n      return {\n        model: {\n          username: '',\n          passwd: '',\n          passwd2: '',\n          city: '',\n          age: '',\n          gender: 'male',\n        },\n        state: '',\n        message: {\n          username: '',\n          passwd: '',\n          passwd2: '',\n          age: ''\n        },\n        val: 'register',\n        isLogin: true,\n        showArea: false,\n        areaList\n      }\n    },\n    methods: {\n      login() {\n        let url = '/recsys/register'\n        let res = this.model\n        //密码加密\n        res.passwd = encrypt.Encrypt(this.model.passwd)\n\n        if(this.state){\n          this.axios.post(url, res).then(resource => {\n          if (resource.data.code === 200) {\n            let loginInfo = {\n              LoginName: res.username,\n              openId: \"asdasdadasdasdadad\"\n            }\n\n            // 调用setCookie方法，同时传递需要存储的数据，保存天数\n            this.cookie.setCookie(loginInfo, 7)\n\n            //将信息存入store 全部组件都可以使用\n            this.$store.state.type = 'signUp'\n            this.$store.state.user.username = res.username\n            this.$store.state.user.age = this.model.age\n            this.$store.state.user.gender = this.model.gender\n\n            this.$router.push('/recLists')\n        \n          }if(resource.data.code === 500) {\n            Toast('用户名已存在')\n          }\n        })\n        }\n      },\n\n      //处理选择的城市\n      getCity(city) {\n        this.model.city = city.join('-')\n      },\n\n      // 验证用户名\n      ruleName(val) {\n        var nameReg = /^[A-Za-z0-9]+$/\n        if (val == '') {\n          this.message.username = '请输入用户名'\n          this.state = false\n          return false\n        } else\n        if (!nameReg.test(val)) {\n          this.message.username = '用户名格式为字母和数字'\n          this.state = false\n          return false\n        } else {\n          this.message.username = ''\n          this.state = true\n        }\n      },\n\n      // 验证密码\n      rulePasswd(val) {\n        var reg = /^[A-Za-z0-9]{6,}$/\n        if (val == '') {\n          this.message.passwd = '请输入密码'\n          this.state = false\n          return false\n        } else\n        if (!reg.test(val)) {\n          this.message.passwd = '密码长度至少6位，仅包括为字母和数字'\n          this.state = false\n          return false\n        } else {\n          this.message.passwd = ''\n          this.state = true\n        }\n      },\n\n      //验证密码是否一致\n      rulePasswd2(val) {\n        if (val == '') {\n          this.message.passwd2 = '请再次输入密码'\n          this.state = false\n          return false\n        } else\n        if (val !== this.model.passwd) {\n          this.message.passwd2 = '两次输入的密码不正确'\n          this.state = false\n          return false\n        } else {\n          this.message.passwd2 = ''\n          this.state = true\n        }\n      },\n\n      //验证年龄\n      ruleAge(val) {\n        var ageReg = /^([1-9][0-9]{0,1}|100)$/\n        if (val == '') {\n          this.message.age = '请输入年龄'\n          this.state = false\n          return false\n        } else\n        if (!ageReg.test(val)) {\n          this.message.age = '请输入1-100的整数'\n          this.state = false\n          return false\n        } else {\n          this.message.age = ''\n          this.state = true\n        }\n      },\n\n      // 选择城市\n      onConfirm(values) {\n        let pinyin = require('js-pinyin');\n        this.model.city = values[1].name.slice(0, values[1].name.length - 1) //过滤到市级，删除‘市’\n        this.model.city = pinyin.getFullChars(this.model.city) //将汉字转换为拼音\n        this.showArea = false;\n      },\n    }\n  }\n</script>\n\n<style scoped>\n  /* 错误信息提示 */\n  .errorMessage {\n    color: red;\n    font-size: .8rem;\n    display: block;\n    padding: 1rem 0 0 1rem;\n  }\n\n  /* container */\n   .login-container {\n    font-family: 'Montserrat', sans-serif;\n    font-size: 16px;\n    line-height: 1;\n    letter-spacing: 1px;\n    display: block;\n    position: relative;\n    z-index: 0;\n    background-image: url(https://img0.baidu.com/it/u=3564438015,1736378667&fm=26&fmt=auto);\n    background-repeat: no-repeat;\n    background-attachment: fixed;\n    background-size: 100% 100%;\n    background-color: black;\n    padding: 4rem 4rem 4rem 4rem;\n    height: 100vh;\n    overflow: auto;\n  }\n\n  /* 登录和注册的切换 */\n  .login-nav {\n    position: relative;\n    padding: 0;\n    margin: 0 0 3em 1rem;\n  }\n\n  .login-nav__item {\n    list-style: none;\n    display: inline-block;\n  }\n\n  .login-nav__item+.login-nav__item {\n    margin-left: 2.25rem;\n  }\n\n  .login-nav__item a {\n    position: relative;\n    color: rgba(255, 255, 255, 0.5);\n    text-decoration: none;\n    text-transform: uppercase;\n    font-weight: 500;\n    font-size: 1.25rem;\n    padding-bottom: .5rem;\n    transition: .20s all ease;\n  }\n\n  .login-nav__item.active a,\n  .login-nav__item a:hover {\n    color: #ffffff;\n    transition: .15s all ease;\n  }\n\n  .login-nav__item a:after {\n    content: '';\n    display: inline-block;\n    height: 10px;\n    background-color: rgb(255, 255, 255);\n    position: absolute;\n    right: 100%;\n    bottom: -1px;\n    left: 0;\n    border-radius: 50%;\n    transition: .15s all ease;\n  }\n\n  .login-nav__item a:hover:after,\n  .login-nav__item.active a:after {\n    background-color: rgb(17, 97, 237);\n    height: 2px;\n    right: 0;\n    bottom: 2px;\n    border-radius: 0;\n    transition: .20s all ease;\n  }\n\n  /* label标签 */\n  .login__label {\n    display: block;\n    padding-left: 1rem;\n    color: rgba(255, 255, 255, 0.5);\n    text-transform: uppercase;\n    font-size: .75rem;\n    margin-bottom: 1rem;\n  }\n\n  .login__label {\n    margin-top: 1.5rem;\n  }\n\n  /* 提交按钮 */\n  .login__submit {\n    color: #ffffff;\n    font-size: 1rem;\n    font-family: 'Montserrat', sans-serif;\n    text-transform: uppercase;\n    letter-spacing: 1px;\n    margin-top: 2rem;\n    padding: .75rem;\n    border-radius: 2rem;\n    display: block;\n    width: 100%;\n    background-color: rgba(17, 97, 237, .75);\n    border: none;\n    cursor: pointer;\n  }\n\n  .login__submit:hover {\n    background-color: rgba(17, 97, 237, 1);\n  }\n</style>"],"mappings":";AA0DA,SACAA,QAAA,QACA;AACA,SAAAC,KAAA;AACA,OAAAC,OAAA;AACA;EACAC,KAAA;IACA;MACAC,KAAA;QACAC,QAAA;QACAC,MAAA;QACAC,OAAA;QACAC,IAAA;QACAC,GAAA;QACAC,MAAA;MACA;MACAC,KAAA;MACAC,OAAA;QACAP,QAAA;QACAC,MAAA;QACAC,OAAA;QACAE,GAAA;MACA;MACAI,GAAA;MACAC,OAAA;MACAC,QAAA;MACAf;IACA;EACA;EACAgB,OAAA;IACAC,MAAA;MACA,IAAAC,GAAA;MACA,IAAAC,GAAA,QAAAf,KAAA;MACA;MACAe,GAAA,CAAAb,MAAA,GAAAJ,OAAA,CAAAkB,OAAA,MAAAhB,KAAA,CAAAE,MAAA;MAEA,SAAAK,KAAA;QACA,KAAAU,KAAA,CAAAC,IAAA,CAAAJ,GAAA,EAAAC,GAAA,EAAAI,IAAA,CAAAC,QAAA;UACA,IAAAA,QAAA,CAAArB,IAAA,CAAAsB,IAAA;YACA,IAAAC,SAAA;cACAC,SAAA,EAAAR,GAAA,CAAAd,QAAA;cACAuB,MAAA;YACA;;YAEA;YACA,KAAAC,MAAA,CAAAC,SAAA,CAAAJ,SAAA;;YAEA;YACA,KAAAK,MAAA,CAAApB,KAAA,CAAAqB,IAAA;YACA,KAAAD,MAAA,CAAApB,KAAA,CAAAsB,IAAA,CAAA5B,QAAA,GAAAc,GAAA,CAAAd,QAAA;YACA,KAAA0B,MAAA,CAAApB,KAAA,CAAAsB,IAAA,CAAAxB,GAAA,QAAAL,KAAA,CAAAK,GAAA;YACA,KAAAsB,MAAA,CAAApB,KAAA,CAAAsB,IAAA,CAAAvB,MAAA,QAAAN,KAAA,CAAAM,MAAA;YAEA,KAAAwB,OAAA,CAAAC,IAAA;UAEA;UAAA,IAAAX,QAAA,CAAArB,IAAA,CAAAsB,IAAA;YACAxB,KAAA;UACA;QACA;MACA;IACA;IAEA;IACAmC,QAAA5B,IAAA;MACA,KAAAJ,KAAA,CAAAI,IAAA,GAAAA,IAAA,CAAA6B,IAAA;IACA;IAEA;IACAC,SAAAzB,GAAA;MACA,IAAA0B,OAAA;MACA,IAAA1B,GAAA;QACA,KAAAD,OAAA,CAAAP,QAAA;QACA,KAAAM,KAAA;QACA;MACA,OACA,KAAA4B,OAAA,CAAAC,IAAA,CAAA3B,GAAA;QACA,KAAAD,OAAA,CAAAP,QAAA;QACA,KAAAM,KAAA;QACA;MACA;QACA,KAAAC,OAAA,CAAAP,QAAA;QACA,KAAAM,KAAA;MACA;IACA;IAEA;IACA8B,WAAA5B,GAAA;MACA,IAAA6B,GAAA;MACA,IAAA7B,GAAA;QACA,KAAAD,OAAA,CAAAN,MAAA;QACA,KAAAK,KAAA;QACA;MACA,OACA,KAAA+B,GAAA,CAAAF,IAAA,CAAA3B,GAAA;QACA,KAAAD,OAAA,CAAAN,MAAA;QACA,KAAAK,KAAA;QACA;MACA;QACA,KAAAC,OAAA,CAAAN,MAAA;QACA,KAAAK,KAAA;MACA;IACA;IAEA;IACAgC,YAAA9B,GAAA;MACA,IAAAA,GAAA;QACA,KAAAD,OAAA,CAAAL,OAAA;QACA,KAAAI,KAAA;QACA;MACA,OACA,IAAAE,GAAA,UAAAT,KAAA,CAAAE,MAAA;QACA,KAAAM,OAAA,CAAAL,OAAA;QACA,KAAAI,KAAA;QACA;MACA;QACA,KAAAC,OAAA,CAAAL,OAAA;QACA,KAAAI,KAAA;MACA;IACA;IAEA;IACAiC,QAAA/B,GAAA;MACA,IAAAgC,MAAA;MACA,IAAAhC,GAAA;QACA,KAAAD,OAAA,CAAAH,GAAA;QACA,KAAAE,KAAA;QACA;MACA,OACA,KAAAkC,MAAA,CAAAL,IAAA,CAAA3B,GAAA;QACA,KAAAD,OAAA,CAAAH,GAAA;QACA,KAAAE,KAAA;QACA;MACA;QACA,KAAAC,OAAA,CAAAH,GAAA;QACA,KAAAE,KAAA;MACA;IACA;IAEA;IACAmC,UAAAC,MAAA;MACA,IAAAC,MAAA,GAAAC,OAAA;MACA,KAAA7C,KAAA,CAAAI,IAAA,GAAAuC,MAAA,IAAAG,IAAA,CAAAC,KAAA,IAAAJ,MAAA,IAAAG,IAAA,CAAAE,MAAA;MACA,KAAAhD,KAAA,CAAAI,IAAA,GAAAwC,MAAA,CAAAK,YAAA,MAAAjD,KAAA,CAAAI,IAAA;MACA,KAAAO,QAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}